**Симулятор молитв Genshin Impact для Twitch**

*genshin-twitch-wish не связан с HoYoverse. Genshin Impact, контент и материалы игры являются товарными знаками и принадлежат HoYoverse.*

Бот написан на Python и использует PyGame для вывода анимации, TwitchIO для взаимодействия с чатом на трансляции.

После запуска нужно добавить захват окна в OBS:
![Окно захвата](https://sun9-8.userapi.com/impf/pAESgu_LD0KJp2P7ABr8u2renAdz9HBMxy60HQ/Sxxgzt6h_Ao.jpg?size=724x511&quality=96&sign=1ff1d15cac089fd88ff3fb4f176af17f&type=album)

И настроить фильтр для корректной работы прозрачности окна:
![Окно фильтра](https://sun9-1.userapi.com/s/v1/if2/1HahxRWaJBF1kzE3BaChFSsMspC-LWBOcPf-kcj_f9g52D-Ia53P2osjQkR4F4wZXmfmu2-Gaavy5D7rU78ilhnS.jpg?size=861x757&quality=96&type=album)

В чате бот реагирует на команду из файла конфигурации **wish_command**. Примеры работы:
![Пример работы бота](https://sun9-63.userapi.com/impf/VUBcsjyNwLuwAvcEcP4bflMsJz0JYtLOTm0gXQ/dCB9_I5UULE.jpg?size=1604x743&quality=96&sign=82f96fda9e09b62b29dd2935eee65953&type=album)

База предметов и персонажей актуальная для патча 2.8. Бот не использует систему баннеров, вместо этого при каждой крутке есть одинаковый шанс на выпадение любого доступного предмета или персонажа.

Описание параметров из **config.json**:

 - **bot_token** - **oauth** токен бота для Twitch с правами **chat**
 - **work_channel** - название канала (не ссылка, только ник), где будет работать бот
 - **self_wish** - должен ли бот играть сам с собой (периодически пишет в чат команду **wish_command**)
 - **self_wish_every** - если бот играет сам с собой, то как часто (в секундах)
 - **window_name** - название окна для захвата в **OBS**
 - **play_sound** - играть ли звуки (все звуки воспроизводятся в устройство по умолчанию)
 - **wish_global_timeout** - общее ограничение для всех пользователей (в секундах)
 - **wish_timeout** - как часто каждый пользователь можешь использовать команды бота (в секундах)
   - **broadcaster** - для автора канала
   - **mod** - для модераторов
   - **subscriber** - для подписчиков
   - **user** - все остальные
 - **wish_fo_garant** - сколько круток должен сделать пользователь до гаранта 4*
 - **wish_fo_chance** - общий шанс выпадения 4* (от 1 до 99)
 - **wish_fi_garant** - сколько круток должен сделать пользователь до гаранта 5*
 - **wish_fi_chance** - общий шанс выпадения 5* (от 1 до 99)
 - **wish_fi_soft_a** - после какой молитвы начнет работать мягкий гарант (должен быть меньше **wish_fi_garant**)
 - **test_mode** - режим тестирования, твич бот не включается, автоматически делаются 100 молитв
 - **start_delay** - как долго будет показан ник польователя сделавшего молитву (в секундах)
 - **end_delay** - как долго будет показан результат молитвы (в секундах)
   - **3** - для 3* оружий
   - **4** - для 4* оружий/персонажей
   - **5** - для 5* оружий/персонажей
 - **user_background** - параметры фона, который будет использоваться вместо хромакея (JPEG, PNG или GIF (возможно также использовать MP4 и другие форматы видео, все анимации будут зациклены) с разрешением 1280х720)
   - **path** - название файла в папке background (только имя файла, не полный путь)
   - **ftype** - тип фона, **static** для JPG или PNG, **gif** для GIF и тд.
 - **history_file** - параметры записи истории молитв (имеют формат CSV)
   - **path** - имя файла (не полный путь, вместе с расширением), куда будет написываться история
   - **3** - записывать ли выпадение 3*
   - **4** - записывать ли выпадение 4*
   - **5** - записывать ли выпадение 5*
 - **fps** - частота обновления анимаций (все анимации настроены на 30 кадров в секунду)
 - **chroma_color** - цвет фона, по умолчанию #00FF00 - зеленый
 - **wish_command** - команда, на которую будет реагировать бот в чате
 - **send_notify** - отправлять ли уведомление в чат, что пользователь снова может использовать команду **wish_command**

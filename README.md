**Симулятор молитв Genshin Impact для Twitch**

*genshin-twitch-wish не связан с HoYoverse. Genshin Impact, контент и материалы игры являются товарными знаками и принадлежат HoYoverse.*

Бот написан на Python и использует PyGame для вывода анимации, TwitchIO для взаимодействия с чатом на трансляции.

После запуска нужно добавить захват окна в OBS:
![Окно захвата](https://sun9-8.userapi.com/impf/pAESgu_LD0KJp2P7ABr8u2renAdz9HBMxy60HQ/Sxxgzt6h_Ao.jpg?size=724x511&quality=96&sign=1ff1d15cac089fd88ff3fb4f176af17f&type=album)

И настроить фильтр для корректной работы прозрачности окна:
![Окно фильтра](https://sun9-1.userapi.com/s/v1/if2/1HahxRWaJBF1kzE3BaChFSsMspC-LWBOcPf-kcj_f9g52D-Ia53P2osjQkR4F4wZXmfmu2-Gaavy5D7rU78ilhnS.jpg?size=861x757&quality=96&type=album)

В чате бот реагирует на команду **!wish**. Примеры работы:
![Пример работы бота](https://sun9-63.userapi.com/impf/VUBcsjyNwLuwAvcEcP4bflMsJz0JYtLOTm0gXQ/dCB9_I5UULE.jpg?size=1604x743&quality=96&sign=82f96fda9e09b62b29dd2935eee65953&type=album)

База предметов и персонажей актуальная для патча 2.7. Бот не использует систему баннеров, вместо этого при каждой крутке есть одинаковый шанс на выпадение любого доступного предмета или персонажа.

Описание параметров из **config.json**:

 - **bot_token** - **oauth** токен бота для Twitch с правами **chat**
 - **work_channel** - название канала, где будет работать бот
 - **self_wish** - должен ли бот играть сам с собой
 - **self_wish_every** - если бот играет сам с собой, то как часто (в секундах)
 - **window_name** - название окна для захвата в **OBS**
 - **play_sound** - играть ли звуки (все звуки воспроизводятся в устройство по умолчанию)
 - **wish_global_timeout** - общее ограничение для всех пользователей (в секундах)
 - **wish_timeout** - как часто каждый пользователь можешь использовать команды бота (в секундах)
   - **broadcaster** - для автора канала
   - **mod** - для модераторов
   - **subscriber** - для подписчиков
   - **user** - все остальные
 - **wish_fo_garant** - сколько круток должен сделать пользователь до гаранта 4*
 - **wish_fo_chance** - общий шанс выпадения 4* (от 1 до 99)
 - **wish_fi_garant** - сколько круток должен сделать пользователь до гаранта 5*
 - **wish_fi_chance** - общий шанс выпадения 5* (от 1 до 99)
 - **wish_fi_soft_a** - после какой молитвы начнет работать мягкий гарант (должен быть меньше **wish_fi_garant**)
 - **test_mode** - режим тестирования, твич бот не включается, автоматически делаются 100 молитв
 - **start_delay** - как долго будет показан ник польователя сделавшего молитву (в секундах)
 - **end_delay** - как долго будет показан результат молитвы (в секундах)
 - **fps** - частота обновления анимаций (все анимации настроены на 30 кадров в секунду)
 - **user_background** - строка, имя файла в папке background, который будет использоваться вместо фона (JPEG или PNG разрешением 1280х720)
 - **chroma_color** - цвет фона (по умолчанию #00FF00 - зеленый)
 - **history_file** - строка, имя файла для записи истории молитв (имеют формат CSV)
